<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medicine Reminder - Track Your Medications</title>
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <meta name="theme-color" content="#2563eb">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div id="app">
        <!-- Login Screen -->
        <div id="login-screen" class="screen active">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <div class="app-logo">
                            <i class="fas fa-pills"></i>
                        </div>
                        <h1>Medicine Reminder</h1>
                        <p>Track your medications and never miss a dose</p>
                    </div>
                    
                    <form id="login-form">
                        <div class="form-group">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="login-email" placeholder="Enter your email" required>
                        </div>
                        
                        <div class="form-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="login-password" placeholder="Enter your password" required>
                            <button type="button" class="toggle-password" onclick="togglePassword('login-password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i>
                            Sign In
                        </button>
                    </form>
                    
                    <div class="auth-footer">
                        <p>Don't have an account? <a href="#" onclick="showScreen('register-screen')">Sign Up</a></p>
                        <div class="demo-account">
                            <p><strong>Demo Admin Account</strong></p>
                            <p>Email: admin@medicine.com</p>
                            <p>Password: admin123</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Register Screen -->
        <div id="register-screen" class="screen">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <button class="back-btn" onclick="showScreen('login-screen')">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h1>Create Account</h1>
                    </div>
                    
                    <form id="register-form">
                        <div class="form-group">
                            <i class="fas fa-user"></i>
                            <input type="text" id="register-username" placeholder="Full Name" required>
                        </div>
                        
                        <div class="form-group">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="register-email" placeholder="Email" required>
                        </div>
                        
                        <div class="form-group">
                            <i class="fas fa-phone"></i>
                            <input type="tel" id="register-phone" placeholder="Phone (optional)">
                        </div>
                        
                        <div class="form-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="register-password" placeholder="Password" required>
                            <button type="button" class="toggle-password" onclick="togglePassword('register-password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        
                        <div class="form-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="register-confirm-password" placeholder="Confirm Password" required>
                            <button type="button" class="toggle-password" onclick="togglePassword('register-confirm-password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-user-plus"></i>
                            Create Account
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- User Dashboard -->
        <div id="user-dashboard" class="screen">
            <div class="dashboard-container">
                <div class="header">
                    <div class="user-info">
                        <h2 id="user-name">User</h2>
                        <p>Manage your medications</p>
                    </div>
                    <div class="header-actions">
                        <div class="dropdown-container">
                            <button class="btn btn-outline dropdown-btn" onclick="toggleDropdown()">
                                <i class="fas fa-ellipsis-v"></i>
                                Menu
                                <i class="fas fa-chevron-down dropdown-arrow"></i>
                            </button>
                            <!-- Update the dropdown menu in user-dashboard -->
                            <div id="user-dropdown" class="dropdown-menu hidden">
                                <button class="dropdown-item" onclick="showUpcomingRemindersMenu()">
                                    <i class="fas fa-bell"></i>
                                    Upcoming Reminders
                                </button>
                                <button class="dropdown-item" onclick="showMedicineHistory()">
                                    <i class="fas fa-history"></i>
                                    Medicine History
                                </button>
                                <button class="dropdown-item" onclick="logout()">
                                    <i class="fas fa-sign-out-alt"></i>
                                    Logout
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add notification bell to header -->
                <div class="header-actions">
                    <button class="notification-bell" id="notification-bell">
                        <i class="fas fa-bell"></i>
                    </button>
                </div>
                
                <div class="stats-card">
                    <div class="stat-item">
                        <i class="fas fa-pills" style="color: #2563eb;"></i>
                        <span class="stat-label">My Medicines</span>
                        <span class="stat-value" id="my-medicines">0</span>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <i class="fas fa-check-circle" style="color: #16a34a;"></i>
                        <span class="stat-label">Today Taken</span>
                        <span class="stat-value" id="today-taken">0</span>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <i class="fas fa-times-circle" style="color: #ef4444;"></i>
                        <span class="stat-label">Today Missed</span>
                        <span class="stat-value" id="today-missed">0</span>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <i class="fas fa-clock" style="color: #f59e0b;"></i>
                        <span class="stat-label">Active</span>
                        <span class="stat-value" id="active-medicines">0</span>
                    </div>
                </div>

                <div class="card">
                    <h3>Upcoming Reminders</h3>
                    <div id="reminders-list" class="reminders-list">
                        <!-- Reminders will be loaded here -->
                    </div>
                </div>

                <div class="card">
                    <h3>My Medicines</h3>
                    <div id="medicines-list" class="medicines-list">
                        <!-- Medicines will be loaded here -->
                    </div>
                </div>

                <div class="card">
                    <h3>Add New Medicine</h3>
                    <form id="medicine-form">
                        <div class="form-group">
                            <i class="fas fa-pills"></i>
                            <input type="text" id="medicine-name" placeholder="Medicine Name" required>
                        </div>

                        <div class="form-group">
                            <i class="fas fa-prescription-bottle"></i>
                            <input type="text" id="dosage" placeholder="Dosage (e.g., 500mg, 1 tablet)" required>
                        </div>

                        <div class="form-group">
                            <i class="fas fa-sync-alt"></i>
                            <select id="frequency" required>
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                                <option value="as_needed">As Needed</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <i class="fas fa-calendar"></i>
                            <select id="schedule-type">
                                <option value="fixed">Fixed Schedule</option>
                                <option value="flexible">Flexible Schedule</option>
                            </select>
                        </div>
                        <!-- Change this in the medicine form -->
                        <div class="form-group">
                            <i class="fas fa-clock"></i>
                            <input type="text" id="specific-times" placeholder="Specific times (e.g., 08:00 AM, 02:00 PM, 08:00 PM)">
                            <small style="font-size: 12px; color: #64748b; display: block; margin-top: 5px;">
                                Enter comma-separated times in 12-hour format (HH:MM AM/PM)
                            </small>
                        </div>
                        <div class="form-group">
                            <i class="fas fa-clock"></i>
                            <input type="number" id="times-per-day" placeholder="Times per day" value="1" min="1" max="10">
                        </div>

                        <div class="form-group">
                            <i class="fas fa-calendar-plus"></i>
                            <input type="date" id="start-date" required>
                        </div>

                        <div class="form-group">
                            <i class="fas fa-calendar-minus"></i>
                            <input type="date" id="end-date" placeholder="End Date (optional)">
                        </div>

                        <div class="form-group">
                            <i class="fas fa-file-lines"></i>
                            <textarea id="instructions" placeholder="Special instructions..." rows="3"></textarea>
                        </div>

                        <div class="form-group">
                            <i class="fas fa-flag"></i>
                            <select id="priority">
                                <option value="Low">Low Priority</option>
                                <option value="Medium" selected>Medium Priority</option>
                                <option value="High">High Priority</option>
                                <option value="Critical">Critical</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary" id="submit-medicine-btn">
                            <i class="fas fa-plus"></i>
                            Add Medicine
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Medicine History Screen -->
        <div id="medicine-history-screen" class="screen">
            <div class="screen-header">
                <button class="back-btn" onclick="showScreen('user-dashboard')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2>Medicine History</h2>
            </div>
            <div class="screen-content">
                <div id="history-list" class="history-list">
                    <!-- History will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Upcoming Reminders Screen -->
        <div id="upcoming-reminders-screen" class="screen">
            <div class="screen-header">
                <button class="back-btn" onclick="showScreen('user-dashboard')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2>Upcoming Reminders</h2>
            </div>
            <div class="screen-content">
                <div id="upcoming-reminders-list" class="reminders-list">
                    <!-- Upcoming reminders will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Admin Dashboard -->
        <div id="admin-dashboard" class="screen">
            <div class="admin-container">
                <!-- Admin content will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Snackbar for notifications -->
    <div id="snackbar" class="snackbar hidden"></div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
